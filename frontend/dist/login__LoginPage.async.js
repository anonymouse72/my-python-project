"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[459],{27466:function(p,m,e){e.r(m);var h=e(17061),t=e.n(h),v=e(17156),D=e.n(v),M=e(27424),O=e.n(M),y=e(67294),n=e(23323),i=e(45803),u=e(55999),g=e(37026),K=e(39522),o=e(20829),f=e(93578),s=e(85893),A=function(B){var I=B.isRegisterSucess,L=(0,f.s0)(),R=n.Z.useForm(),T=O()(R,1),d=T[0],C=function(){var j=D()(t()().mark(function E(l){var P,c,_;return t()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("Success:",l),a.prev=1,a.next=4,d.validateFields(["email"]);case 4:return P=l.email,a.next=7,(0,o.oP)(P);case 7:c=a.sent,c.data.message.includes("Email already exists")?(0,o.pH)(l).then(function(r){console.log(r),r.status==200?(localStorage.setItem("session",r.data.session),localStorage.setItem("user",r.data.user),i.ZP.success(r.data.message),L("/")):(console.error(r.message),i.ZP.error(r.data.message))}).catch(function(r){console.error("Error fetching messages:",r)}):I("2"),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),console.error("Login error:",a.t0),i.ZP.error(a.t0===null||a.t0===void 0||(_=a.t0.response)===null||_===void 0||(_=_.data)===null||_===void 0?void 0:_.message);case 15:case"end":return a.stop()}},E,null,[[1,11]])}));return function(l){return j.apply(this,arguments)}}();return(0,s.jsx)("div",{className:"auth-container",children:(0,s.jsx)("div",{className:"auth-card",children:(0,s.jsxs)(n.Z,{form:d,name:"Login",initialValues:{remember:!0},onFinish:C,className:"auth-form",children:[(0,s.jsx)(n.Z.Item,{name:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"},{pattern:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u90AE\u7BB1\u5730\u5740!"}],children:(0,s.jsx)(u.Z,{placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"})}),(0,s.jsx)(n.Z.Item,{name:"password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801!"}],children:(0,s.jsx)(u.Z.Password,{placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"})}),(0,s.jsx)(n.Z.Item,{children:(0,s.jsx)("div",{className:"margincenter",children:(0,s.jsx)(g.ZP,{type:"primary",htmlType:"submit",className:"auth-button",children:"Login"})})})]})})})};m.default=A},39522:function(){}}]);
