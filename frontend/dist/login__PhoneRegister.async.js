"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[768,459],{27466:function(G,D,e){e.r(D);var T=e(17061),f=e.n(T),P=e(17156),A=e.n(P),L=e(27424),K=e.n(L),p=e(67294),E=e(23323),j=e(45803),l=e(55999),d=e(37026),F=e(39522),S=e(20829),C=e(93578),n=e(85893),N=function(){var U=(0,C.s0)(),W=E.Z.useForm(),_=K()(W,1),M=_[0],O=function(){var Z=A()(f()().mark(function v(h){var i;return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("Success:",h),a.prev=1,a.next=4,M.validateFields(["email"]);case 4:(0,S.pH)(h).then(function(t){console.log(t),t.status==200?(localStorage.setItem("session",t.data.session),localStorage.setItem("user",t.data.user),j.ZP.success(t.data.message),U("/")):(console.error(t.message),j.ZP.error(t.data.message))}).catch(function(t){console.error("Error fetching messages:",t)}),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(1),console.error("\u767B\u5F55\u5931\u8D25:",a.t0),j.ZP.error(a.t0===null||a.t0===void 0||(i=a.t0.response)===null||i===void 0||(i=i.data)===null||i===void 0?void 0:i.message);case 11:case"end":return a.stop()}},v,null,[[1,7]])}));return function(h){return Z.apply(this,arguments)}}();return(0,n.jsx)("div",{className:"auth-container",children:(0,n.jsx)("div",{className:"auth-card",children:(0,n.jsxs)(E.Z,{form:M,name:"Login",initialValues:{remember:!0},onFinish:O,className:"auth-form",children:[(0,n.jsx)(E.Z.Item,{name:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"},{pattern:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u90AE\u7BB1\u5730\u5740!"}],children:(0,n.jsx)(l.Z,{placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"})}),(0,n.jsx)(E.Z.Item,{name:"password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801!"}],children:(0,n.jsx)(l.Z.Password,{placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"})}),(0,n.jsx)(E.Z.Item,{children:(0,n.jsx)("div",{className:"margincenter",children:(0,n.jsx)(d.ZP,{type:"primary",htmlType:"submit",className:"auth-button",children:"Login"})})})]})})})};D.default=N},26881:function(G,D,e){e.r(D),e.d(D,{default:function(){return M}});var T=e(27424),f=e.n(T),P=e(67294),A=e(21204),L=e(27466),K=e(17061),p=e.n(K),E=e(17156),j=e.n(E),l=e(23323),d=e(45803),F=e(55999),S=e(78957),C=e(37026),n=e(20829),N=e(39522),s=e(85893),U=function(Z){var v=Z.isRegisterSucess,h=l.Z.useForm(),i=f()(h,1),y=i[0],a=(0,P.useState)(0),t=f()(a,2),o=t[0],$=t[1],V=(0,P.useState)(null),x=f()(V,2),z=x[0],H=x[1];(0,P.useEffect)(function(){if(o>0){var R=setInterval(function(){$(function(c){return c<=1?(clearInterval(R),0):c-1})},1e3);H(R)}return function(){return clearInterval(z)}},[o]);var X=function(){var R=j()(p()().mark(function c(){var I,g,m,B;return p()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,y.validateFields(["email"]);case 3:return I=r.sent,g=I.email,r.next=7,(0,n.oP)(g);case 7:if(m=r.sent,!m.data.message.includes("Email already exists")){r.next=12;break}return d.ZP.warning(m.data.message),v("1"),r.abrupt("return");case 12:return r.next=14,(0,n.HX)({email:g});case 14:B=r.sent,B.status===200?(d.ZP.success(B.data.message),$(60)):d.ZP.error(B.data.message),r.next=21;break;case 18:r.prev=18,r.t0=r.catch(0),d.ZP.error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740");case 21:case"end":return r.stop()}},c,null,[[0,18]])}));return function(){return R.apply(this,arguments)}}(),J=function(){var R=j()(p()().mark(function c(I){var g,m;return p()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,(0,n.a$)(I);case 3:g=u.sent,g.status===200?(d.ZP.success(g.data.message),v("1"),y.resetFields()):(d.ZP.error(g.data.message||"unknown error"),v("2")),u.next=10;break;case 7:u.prev=7,u.t0=u.catch(0),d.ZP.error((u.t0===null||u.t0===void 0||(m=u.t0.response)===null||m===void 0||(m=m.data)===null||m===void 0?void 0:m.message)||"\u6CE8\u518C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5");case 10:case"end":return u.stop()}},c,null,[[0,7]])}));return function(I){return R.apply(this,arguments)}}();return(0,s.jsx)("div",{className:"auth-container",children:(0,s.jsxs)(l.Z,{form:y,name:"Register",initialValues:{remember:!0},onFinish:J,className:"auth-form",children:[(0,s.jsx)(l.Z.Item,{name:"name",children:(0,s.jsx)(F.Z,{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",style:{width:348}})}),(0,s.jsx)(l.Z.Item,{name:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"},{}],children:(0,s.jsx)(F.Z,{placeholder:"\u8BF7\u8F93\u5165\u5E38\u7528\u90AE\u7BB1",style:{width:348}})}),(0,s.jsx)(l.Z.Item,{name:"verificationCode",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801!"}],children:(0,s.jsxs)(S.Z,{children:[(0,s.jsx)(F.Z,{placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",style:{width:220}}),(0,s.jsx)(C.ZP,{type:"primary",onClick:X,disabled:o>0,style:{width:120},children:o>0?"\u91CD\u65B0\u83B7\u53D6 (".concat(o,"s)"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"})]})}),(0,s.jsx)(l.Z.Item,{name:"password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801!"}],children:(0,s.jsx)(F.Z.Password,{placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",style:{width:348}})}),(0,s.jsx)(l.Z.Item,{children:(0,s.jsx)("div",{className:"margincenter",children:(0,s.jsx)(C.ZP,{type:"primary",htmlType:"submit",className:"auth-button",children:"Register"})})})]})})},W=U;function _(){var O=(0,P.useState)("1"),Z=f()(O,2),v=Z[0],h=Z[1],i=function(o){h(o)},y=function(o){h(o)},a=[{key:"1",label:"\u5BC6\u7801\u767B\u5F55",children:(0,s.jsx)(L.default,{})},{key:"2",label:"\u90AE\u7BB1\u767B\u5F55\u6CE8\u518C",children:(0,s.jsx)(W,{isRegisterSucess:y})}];return(0,s.jsx)("div",{className:"phone-register-page",children:(0,s.jsx)("div",{className:"register-container",children:(0,s.jsx)(A.Z,{activeKey:v,items:a,onChange:i})})})}var M=_},39522:function(){}}]);
