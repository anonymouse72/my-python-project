"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[768,459],{27466:function(V,F,e){e.r(F);var L=e(17061),h=e.n(L),j=e(17156),S=e.n(j),K=e(27424),U=e.n(K),I=e(67294),g=e(23323),R=e(45803),m=e(55999),o=e(37026),B=e(39522),O=e(20829),T=e(93578),t=e(85893),G=function(W){var N=W.isRegisterSucess,$=(0,T.s0)(),_=g.Z.useForm(),A=U()(_,1),f=A[0],E=function(){var Z=S()(h()().mark(function y(i){var D,P,r;return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("Success:",i),a.prev=1,a.next=4,f.validateFields(["email"]);case 4:return D=i.email,a.next=7,(0,O.oP)(D);case 7:P=a.sent,P.data.message.includes("Email already exists")?(0,O.pH)(i).then(function(l){console.log(l),l.status==200?(localStorage.setItem("session",l.data.session),localStorage.setItem("user",l.data.user),R.ZP.success(l.data.message),$("/")):(console.error(l.message),R.ZP.error(l.data.message))}).catch(function(l){console.error("Error fetching messages:",l)}):N("2"),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),console.error("Login error:",a.t0),R.ZP.error(a.t0===null||a.t0===void 0||(r=a.t0.response)===null||r===void 0||(r=r.data)===null||r===void 0?void 0:r.message);case 15:case"end":return a.stop()}},y,null,[[1,11]])}));return function(i){return Z.apply(this,arguments)}}();return(0,t.jsx)("div",{className:"auth-container",children:(0,t.jsx)("div",{className:"auth-card",children:(0,t.jsxs)(g.Z,{form:f,name:"Login",initialValues:{remember:!0},onFinish:E,className:"auth-form",children:[(0,t.jsx)(g.Z.Item,{name:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"},{pattern:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u90AE\u7BB1\u5730\u5740!"}],children:(0,t.jsx)(m.Z,{placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"})}),(0,t.jsx)(g.Z.Item,{name:"password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801!"}],children:(0,t.jsx)(m.Z.Password,{placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"})}),(0,t.jsx)(g.Z.Item,{children:(0,t.jsx)("div",{className:"margincenter",children:(0,t.jsx)(o.ZP,{type:"primary",htmlType:"submit",className:"auth-button",children:"Login"})})})]})})})};F.default=G},26881:function(V,F,e){e.r(F),e.d(F,{default:function(){return _}});var L=e(27424),h=e.n(L),j=e(67294),S=e(21204),K=e(27466),U=e(17061),I=e.n(U),g=e(17156),R=e.n(g),m=e(23323),o=e(45803),B=e(55999),O=e(78957),T=e(37026),t=e(20829),G=e(39522),s=e(85893),W=function(f){var E=f.isRegisterSucess,Z=m.Z.useForm(),y=h()(Z,1),i=y[0],D=(0,j.useState)(0),P=h()(D,2),r=P[0],x=P[1],a=(0,j.useState)(null),l=h()(a,2),z=l[0],H=l[1];(0,j.useEffect)(function(){if(r>0){var p=setInterval(function(){x(function(v){return v<=1?(clearInterval(p),0):v-1})},1e3);H(p)}return function(){return clearInterval(z)}},[r]);var X=function(){var p=R()(I()().mark(function v(){var C,c,d,M;return I()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.validateFields(["email"]);case 3:return C=n.sent,c=C.email,n.next=7,(0,t.oP)(c);case 7:if(d=n.sent,!d.data.message.includes("Email already exists")){n.next=12;break}return o.ZP.warning(d.data.message),E("1"),n.abrupt("return");case 12:return n.next=14,(0,t.HX)({email:c});case 14:M=n.sent,M.status===200?(o.ZP.success(M.data.message),x(60)):o.ZP.error(M.data.message),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(0),o.ZP.error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740");case 21:case"end":return n.stop()}},v,null,[[0,18]])}));return function(){return p.apply(this,arguments)}}(),J=function(){var p=R()(I()().mark(function v(C){var c,d;return I()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,(0,t.a$)(C);case 3:c=u.sent,c.status===200?(o.ZP.success(c.data.message),E("1"),i.resetFields()):(o.ZP.error(c.data.message||"unknown error"),E("2")),u.next=10;break;case 7:u.prev=7,u.t0=u.catch(0),o.ZP.error((u.t0===null||u.t0===void 0||(d=u.t0.response)===null||d===void 0||(d=d.data)===null||d===void 0?void 0:d.message)||"\u6CE8\u518C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5");case 10:case"end":return u.stop()}},v,null,[[0,7]])}));return function(C){return p.apply(this,arguments)}}();return(0,s.jsx)("div",{className:"auth-container",children:(0,s.jsxs)(m.Z,{form:i,name:"Register",initialValues:{remember:!0},onFinish:J,className:"auth-form",children:[(0,s.jsx)(m.Z.Item,{name:"name",children:(0,s.jsx)(B.Z,{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",style:{width:348}})}),(0,s.jsx)(m.Z.Item,{name:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"},{}],children:(0,s.jsx)(B.Z,{placeholder:"\u8BF7\u8F93\u5165\u5E38\u7528\u90AE\u7BB1",style:{width:348}})}),(0,s.jsx)(m.Z.Item,{name:"verificationCode",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801!"}],children:(0,s.jsxs)(O.Z,{children:[(0,s.jsx)(B.Z,{placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",style:{width:220}}),(0,s.jsx)(T.ZP,{type:"primary",onClick:X,disabled:r>0,style:{width:120},children:r>0?"\u91CD\u65B0\u83B7\u53D6 (".concat(r,"s)"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"})]})}),(0,s.jsx)(m.Z.Item,{name:"password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801!"}],children:(0,s.jsx)(B.Z.Password,{placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",style:{width:348}})}),(0,s.jsx)(m.Z.Item,{children:(0,s.jsx)("div",{className:"margincenter",children:(0,s.jsx)(T.ZP,{type:"primary",htmlType:"submit",className:"auth-button",children:"Register"})})})]})})},N=W;function $(){var A=(0,j.useState)("1"),f=h()(A,2),E=f[0],Z=f[1],y=function(r){Z(r)},i=function(r){Z(r)},D=[{key:"1",label:"\u5BC6\u7801\u767B\u5F55",children:(0,s.jsx)(K.default,{isRegisterSucess:i})},{key:"2",label:"\u90AE\u7BB1\u767B\u5F55\u6CE8\u518C",children:(0,s.jsx)(N,{isRegisterSucess:i})}];return(0,s.jsx)("div",{className:"phone-register-page",children:(0,s.jsx)("div",{className:"register-container",children:(0,s.jsx)(S.Z,{activeKey:E,items:D,onChange:y})})})}var _=$},39522:function(){}}]);
