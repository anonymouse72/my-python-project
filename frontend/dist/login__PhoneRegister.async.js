"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[768,459],{27466:function(G,D,e){e.r(D);var L=e(17061),f=e.n(L),P=e(17156),K=e.n(P),S=e(27424),U=e.n(S),p=e(67294),E=e(23323),j=e(45803),u=e(55999),d=e(37026),F=e(39522),M=e(20829),O=e(93578),n=e(85893),_=function(){var W=(0,O.s0)(),N=E.Z.useForm(),$=U()(N,1),T=$[0],A=function(){var Z=K()(f()().mark(function v(o){var y,c,i;return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("Success:",o),s.prev=1,s.next=4,T.validateFields(["email"]);case 4:return y=o.email,s.next=7,(0,M.oP)(y);case 7:c=s.sent,c.data.message.includes("Email already exists")?(0,M.pH)(o).then(function(l){console.log(l),l.status==200?(localStorage.setItem("session",l.data.session),localStorage.setItem("user",l.data.user),j.ZP.success(l.data.message),W("/")):(console.error(l.message),j.ZP.error(l.data.message))}).catch(function(l){console.error("Error fetching messages:",l)}):isRegisterSucess("2"),s.next=15;break;case 11:s.prev=11,s.t0=s.catch(1),console.error("Login error:",s.t0),j.ZP.error(s.t0===null||s.t0===void 0||(i=s.t0.response)===null||i===void 0||(i=i.data)===null||i===void 0?void 0:i.message);case 15:case"end":return s.stop()}},v,null,[[1,11]])}));return function(o){return Z.apply(this,arguments)}}();return(0,n.jsx)("div",{className:"auth-container",children:(0,n.jsx)("div",{className:"auth-card",children:(0,n.jsxs)(E.Z,{form:T,name:"Login",initialValues:{remember:!0},onFinish:A,className:"auth-form",children:[(0,n.jsx)(E.Z.Item,{name:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"},{pattern:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u90AE\u7BB1\u5730\u5740!"}],children:(0,n.jsx)(u.Z,{placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"})}),(0,n.jsx)(E.Z.Item,{name:"password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801!"}],children:(0,n.jsx)(u.Z.Password,{placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"})}),(0,n.jsx)(E.Z.Item,{children:(0,n.jsx)("div",{className:"margincenter",children:(0,n.jsx)(d.ZP,{type:"primary",htmlType:"submit",className:"auth-button",children:"Login"})})})]})})})};D.default=_},26881:function(G,D,e){e.r(D),e.d(D,{default:function(){return T}});var L=e(27424),f=e.n(L),P=e(67294),K=e(21204),S=e(27466),U=e(17061),p=e.n(U),E=e(17156),j=e.n(E),u=e(23323),d=e(45803),F=e(55999),M=e(78957),O=e(37026),n=e(20829),_=e(39522),a=e(85893),W=function(Z){var v=Z.isRegisterSucess,o=u.Z.useForm(),y=f()(o,1),c=y[0],i=(0,P.useState)(0),I=f()(i,2),s=I[0],l=I[1],V=(0,P.useState)(null),x=f()(V,2),z=x[0],H=x[1];(0,P.useEffect)(function(){if(s>0){var R=setInterval(function(){l(function(h){return h<=1?(clearInterval(R),0):h-1})},1e3);H(R)}return function(){return clearInterval(z)}},[s]);var X=function(){var R=j()(p()().mark(function h(){var B,g,m,C;return p()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c.validateFields(["email"]);case 3:return B=r.sent,g=B.email,r.next=7,(0,n.oP)(g);case 7:if(m=r.sent,!m.data.message.includes("Email already exists")){r.next=12;break}return d.ZP.warning(m.data.message),v("1"),r.abrupt("return");case 12:return r.next=14,(0,n.HX)({email:g});case 14:C=r.sent,C.status===200?(d.ZP.success(C.data.message),l(60)):d.ZP.error(C.data.message),r.next=21;break;case 18:r.prev=18,r.t0=r.catch(0),d.ZP.error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740");case 21:case"end":return r.stop()}},h,null,[[0,18]])}));return function(){return R.apply(this,arguments)}}(),J=function(){var R=j()(p()().mark(function h(B){var g,m;return p()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,n.a$)(B);case 3:g=t.sent,g.status===200?(d.ZP.success(g.data.message),v("1"),c.resetFields()):(d.ZP.error(g.data.message||"unknown error"),v("2")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),d.ZP.error((t.t0===null||t.t0===void 0||(m=t.t0.response)===null||m===void 0||(m=m.data)===null||m===void 0?void 0:m.message)||"\u6CE8\u518C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5");case 10:case"end":return t.stop()}},h,null,[[0,7]])}));return function(B){return R.apply(this,arguments)}}();return(0,a.jsx)("div",{className:"auth-container",children:(0,a.jsxs)(u.Z,{form:c,name:"Register",initialValues:{remember:!0},onFinish:J,className:"auth-form",children:[(0,a.jsx)(u.Z.Item,{name:"name",children:(0,a.jsx)(F.Z,{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",style:{width:348}})}),(0,a.jsx)(u.Z.Item,{name:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1!"},{}],children:(0,a.jsx)(F.Z,{placeholder:"\u8BF7\u8F93\u5165\u5E38\u7528\u90AE\u7BB1",style:{width:348}})}),(0,a.jsx)(u.Z.Item,{name:"verificationCode",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801!"}],children:(0,a.jsxs)(M.Z,{children:[(0,a.jsx)(F.Z,{placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",style:{width:220}}),(0,a.jsx)(O.ZP,{type:"primary",onClick:X,disabled:s>0,style:{width:120},children:s>0?"\u91CD\u65B0\u83B7\u53D6 (".concat(s,"s)"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"})]})}),(0,a.jsx)(u.Z.Item,{name:"password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801!"}],children:(0,a.jsx)(F.Z.Password,{placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",style:{width:348}})}),(0,a.jsx)(u.Z.Item,{children:(0,a.jsx)("div",{className:"margincenter",children:(0,a.jsx)(O.ZP,{type:"primary",htmlType:"submit",className:"auth-button",children:"Register"})})})]})})},N=W;function $(){var A=(0,P.useState)("1"),Z=f()(A,2),v=Z[0],o=Z[1],y=function(s){o(s)},c=function(s){o(s)},i=[{key:"1",label:"\u5BC6\u7801\u767B\u5F55",children:(0,a.jsx)(S.default,{})},{key:"2",label:"\u90AE\u7BB1\u767B\u5F55\u6CE8\u518C",children:(0,a.jsx)(N,{isRegisterSucess:c})}];return(0,a.jsx)("div",{className:"phone-register-page",children:(0,a.jsx)("div",{className:"register-container",children:(0,a.jsx)(K.Z,{activeKey:v,items:i,onChange:y})})})}var T=$},39522:function(){}}]);
